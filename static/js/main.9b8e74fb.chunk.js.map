{"version":3,"sources":["components/Nav.tsx","components/Layout.tsx","hooks/useRecord.tsx","lib/createId.tsx","hooks/useTags.tsx","lib/roundNum.tsx","views/Detail.tsx","components/Types.tsx","components/Money/Tags.tsx","components/Money/Notes.tsx","components/Money/NumberPad.tsx","views/Money.tsx","views/EditTags.tsx","views/Statistics.tsx","views/NotFound.tsx","App.tsx","index.tsx"],"names":["NavWrapper","styled","nav","Nav","to","activeClassName","className","xlinkHref","LayoutWrapper","div","Main","Layout","props","children","useRecord","useState","records","setRecords","useEffect","localRecords","JSON","parse","window","localStorage","getItem","setItem","stringify","addRecord","record","removeTagRecords","tagId","filter","item","computeGroupedList","yearMonth","length","newList","dayjs","createdAt","format","sort","a","b","valueOf","result","items","i","current","last","isSame","push","map","group","totalExpend","reduce","sum","type","parseFloat","amount","totalIncome","id","parseInt","useTags","tags","setTags","localTags","name","addTag","tagName","names","tag","replace","indexOf","alert","removeTag","updateTag","needUpdateTag","newName","findTagName","roundNum","Math","round","DetailHeader","DetailMain","today","Detail","checkMonth","setCheckMonth","groupedList","join","computedTotal","forEach","balance","beautifyDate","date","day","now","beautifyTotal","expend","income","string","roundAmount","onChange","e","target","value","content","index","notes","toString","recordListDom","TypesWrapper","Types","typesMap","typesList","onClick","TagWrapper","Tags","selectedTagId","tagList","NotesWrapper","Notes","note","defaultNotes","defaultValue","onBlur","placeholder","Wrapper","NumberPad","output","_setOutput","setOutput","dateText","document","querySelector","innerHTML","style","fontSize","input","textContent","console","log","indexOfPoint","substring","slice","onOK","onChangeDate","getDate","defaultFormData","Money","selected","setSelected","obj","EditTagsWrapper","tagIds","EditTags","_removeTag","_updateTag","confirm","Modal","prompt","title","icon","ExclamationCircleOutlined","okText","okType","cancelText","onOk","onCancel","ContentWrapper","ChartWrapper","LeaderBoard","ul","Statistics","setType","chartRef","useRef","scrollLeft","scrollWidth","leaderList","recordList","array","total","Date","arrItem","computedLeaderList","totalMount","mount","keyValueList","dateString","subtract","found","key","ref","option","grid","left","right","bottom","xAxis","data","axisTick","alignWithLabel","axisLabel","formatter","substr","yAxis","show","series","symbolSize","tooltip","triggerOn","position","percent","showInfo","strokeColor","strokeWidth","leaderListDom","NotFound","App","exact","from","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9b8e74fb.chunk.js","sourcesContent":["import { NavLink } from \"react-router-dom\";\nimport styled from 'styled-components';\nimport '../helper.scss';\n\nconst NavWrapper = styled.nav`\n    box-shadow: 0 0 3px rgba(0, 0, 0, 0.25);\n    >ul {\n            display: flex;\n            padding-top: 6px;\n           \n        > li {\n                flex-grow: 1;\n                margin-bottom:-10px;\n            > a{\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n                align-items: center;\n                line-height: 1.5;\n                color: inherit;\n                .icon {\n                    fill: inherit;\n                    width: 28px;\n                    height: 28px;\n                }\n                &.selected {\n                    color: rgb(5, 84, 163);\n                    .icon {\n                        fill: rgb(5, 84, 163);\n                    }\n                }\n            }\n           \n        }\n       \n\n    }\n   \n`;\nconst Nav: React.FC = () => {\n    return (\n        <NavWrapper>\n            <ul>\n                <li>\n                    <NavLink to=\"/detail\" activeClassName=\"selected\">\n                    <svg className=\"icon\">\n                        <use xlinkHref=\"#icon-mingxi\"/>\n                    </svg>\n                    明细\n                    </NavLink>\n                </li>\n                <li>\n                    <NavLink to=\"/money\" activeClassName=\"selected\">\n                        <svg className=\"icon\">\n                            <use xlinkHref=\"#icon-tianjia\"/>\n                        </svg>\n                        记账\n                    </NavLink>\n                </li>\n                <li>\n                    <NavLink to=\"/statistics\" activeClassName=\"selected\">\n                        <svg className=\"icon\">\n                            <use xlinkHref=\"#icon-tongji2\"/>\n                        </svg>\n                        统计\n                    </NavLink>\n                </li>\n            </ul>\n            \n        </NavWrapper>\n    )\n};\n\nexport default Nav;","import styled from 'styled-components';\nimport Nav from './Nav';\n\nconst LayoutWrapper = styled.div`\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    width: 100vw;\n    @media (min-width: 500px) {\n        width: 375px;\n        height: 667px;\n        border: 1px solid #d9d9d9;\n        margin: 20px auto;\n    } \n`;\nconst Main = styled.div`\n        display: flex;\n        flex-direction: column;\n        flex-grow: 1;\n        overflow: auto;\n        scrollbar-width: none; /* Firefox 64 */\n        \n`;\n\nconst Layout: React.FC = (props: any) => {\n    return (\n        <LayoutWrapper>\n            <Main>\n                {props.children}\n            </Main>\n            <Nav />\n        </LayoutWrapper>\n    )\n};\n\nexport default Layout;","import dayjs from \"dayjs\";\nimport { useEffect, useState } from \"react\";\n\nexport type Type = '-' | '+';\n\nexport type RecordItem = {\n    type: '-' | '+';\n    tagId: number;\n    notes: string;\n    amount: string;\n    createdAt: string;\n} \n\nexport const useRecord = () => {\n    const [records, setRecords] = useState<RecordItem[]>([]);\n\n    useEffect(() => { \n        const localRecords = JSON.parse(window.localStorage.getItem('records') || '[]');\n        setRecords(localRecords);\n    }, [])\n    useEffect(() => {\n        window.localStorage.setItem('records', JSON.stringify(records));\n    }, [records])\n\n    const addRecord = (record: RecordItem) => {\n        setRecords([ ...records, record ]);\n    }\n    const removeTagRecords = (tagId: number) => {\n        setRecords(records.filter(item => item.tagId !== tagId));\n    }\n    const computeGroupedList = (yearMonth?:String) => {\n        if (records.length === 0) return [];\n        const newList = yearMonth ?\n                        (JSON.parse(JSON.stringify(records)) as RecordItem[]).filter(item => dayjs(item.createdAt).format('YYYY-MM') === yearMonth).sort((a: RecordItem, b: RecordItem) => dayjs(b.createdAt).valueOf() - dayjs(a.createdAt).valueOf()) :\n                        (JSON.parse(JSON.stringify(records)) as RecordItem[]).sort((a: RecordItem, b: RecordItem) => dayjs(b.createdAt).valueOf() - dayjs(a.createdAt).valueOf());\n        \n        if(newList.length === 0) return [];\n        type Result = {\n            createdAt: string; \n            items: RecordItem[];\n            totalExpend?: number;\n            totalIncome?: number;\n        }[];\n        const result: Result = [{createdAt: dayjs(newList[0].createdAt).format('YYYY-MM-DD'), items: [newList[0]]}];\n        for (let i = 1; i < newList.length; i++) {\n                const current = newList[i];\n                const last = result[result.length - 1];\n                if(dayjs(last.createdAt).isSame(dayjs(current.createdAt), 'day')) {\n                    last.items.push(current);\n                } else {\n                    result.push({createdAt: dayjs(current.createdAt).format('YYYY-MM-DD'), items: [current]});\n                }\n            }\n            result.map(group => {\n                group.totalExpend = group.items.reduce((sum, item) => {\n                    return item.type === '-' ? sum + parseFloat(item.amount) : sum;\n                }, 0); \n            })\n            result.map(group => {\n                group.totalIncome = group.items.reduce((sum, item) => {\n                    return item.type === '+' ? sum + parseFloat(item.amount) : sum;\n                }, 0); \n            })\n            return result;\n    }\n    return { records, addRecord, removeTagRecords, computeGroupedList}\n}\n\n\n","let id = parseInt(window.localStorage.getItem('idMax') || '8');\nconst createId = () => {\n    id += 1;\n    window.localStorage.setItem('idMax', JSON.stringify(id));\n    return id;\n}\n\nexport { createId };","import { createId } from \"lib/createId\";\nimport { useEffect, useState } from \"react\"\n\nexport type Tag = {\n    id: number,\n    type: '+' | '-',\n    name: string\n}\n\nexport const useTags = () => {\n    const [tags, setTags] = useState<Tag[]>([]);\n\n    useEffect(() => {\n        let localTags = JSON.parse(window.localStorage.getItem('tags') || '[]');\n        if (localTags.length === 0) {\n            localTags = [\n                { id: 1, type: '-', name: '餐饮' },\n                { id: 2, type: '-', name: '购物' },\n                { id: 3, type: '-', name: '交通' },\n                { id: 4, type: '-', name: '红包' },\n                { id: 5, type: '+', name: '工资' },\n                { id: 6, type: '+', name: '兼职' },\n                { id: 7, type: '+', name: '理财' },\n            ]\n        }\n        setTags(localTags);\n    }, []);\n    useEffect(() => {\n        window.localStorage.setItem('tags', JSON.stringify(tags));\n    }, [tags]);\n    \n    const addTag = (tagName:string, type:'+'|'-') => {\n        const names = tags.filter(tag => tag.type === type).map(tag => tag.name);\n        tagName = tagName.replace(/\\s+/g, \"\");\n        if ( tagName === '') return;\n        if (names.indexOf(tagName) >= 0) {\n            window.alert('标签名已存在');\n        } else {\n            if (tagName.length <= 4) {\n                 setTags([...tags, {id: createId(), type:type, name:tagName}]);\n            } else {\n                window.alert('请输入小于4个字的标签名')\n            }\n        }\n    }\n    const removeTag = (id: number) => {\n        setTags(tags.filter(tag => tag.id !== id));\n    }\n    const updateTag = (id: number, tagName: string) => {\n        const needUpdateTag = tags.filter(tag => tag.id === id)[0];\n        const names = tags.filter(tag => tag.type === needUpdateTag.type).map(tag => tag.name);\n        const newName = tagName.replace(/\\s+/g, \"\");\n\n        if (newName === '') return;\n        if (names.indexOf(newName) >= 0) {\n            window.alert('标签名已存在');\n        } else {\n            if (newName.length <= 4) {\n                    setTags(tags.map(tag => tag.id === id ? {id:id, type: needUpdateTag.type, name:newName} : tag));\n                } else {\n                        window.alert('请输入小于4个字的标签名')\n                }\n        }\n    \n    }\n    const findTagName = (id: number) => {\n        return tags.filter(tag => tag.id === id)[0].name;\n    }\n    return {tags, setTags, addTag, removeTag, updateTag, findTagName}\n}\n\n","const roundNum = (amount:number) => {\r\n        return Math.round(amount * 100) / 100;\r\n}\r\nexport { roundNum };","import Layout from \"components/Layout\";\nimport { useRecord } from \"hooks/useRecord\";\nimport styled from 'styled-components';\nimport dayjs from 'dayjs';\nimport { useTags } from \"hooks/useTags\";\nimport { ChangeEventHandler, useState } from 'react';\nimport {roundNum as roundAmount} from '../lib/roundNum';\n\nconst DetailHeader = styled.div`\n    display: flex;\n    align-items: center;\n    background-color: rgb(0, 122, 204);\n    color: #fff;\n    font-size: 18px;\n    padding: 20px 16px 6px 16px;\n    >ul{\n        flex-grow:1;\n        >li{\n            padding: 2px 0;\n            >span {\n                display:inline-block;\n                width:50%;\n            }\n        }\n    }\n    >.dateWrapper {\n        height:100%;\n        min-width:80px;\n       >div{\n           padding:2px 0;\n       }\n       .monthWrapper {\n        height:50%;\n        overflow:hidden;\n        position: relative;\n        .monthText {\n            position: absolute;\n            right: 1px;\n            top: 0px;\n            pointer-events: none;\n            font-size:16px;\n            width: 100%;\n            height: 100%;\n            background:rgb(0, 122, 204);\n            display:flex;\n            justify-content:center;\n            align-items: center;\n            .triangle {\n                display:inline-block;\n                width: 0;\n                height: 0;\n          \t\tborder: 6px solid #fff;\n                border-left-color: transparent; /* 透明色 */\n                border-bottom-color: transparent;\n                border-right-color: transparent;\n                margin-top: 7px;\n                margin-left:2px;\n            }\n        }\n        .dateInput {\n            position: absolute;\n            height:90%;\n            right:28px;\n            top:2px;\n            border:none;\n        }\n       }\n    }\n`;\nconst DetailMain = styled.div`\n    overflow: auto;\n    scrollbar-width: none; /* Firefox 64 */\n    &::-webkit-scrollbar {\n        display: none;\n    } \n    .title {\n        display: flex;\n        justify-content: space-between;\n        padding: 0.8em 12px;\n        background-color: rgb(236, 236, 236);\n        font-size: 12px;\n        color: #000;\n    }\n    .record{\n        display: flex;\n        justify-content: space-between;\n        border-bottom: 1px solid rgb(236, 236, 236);\n        padding: 4px 14px 2px 14px;\n        height: 50px;\n        >.content {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: flex-start;\n            font-size: 16px;\n            padding-bottom: 2px;\n            >.remark {\n            text-align: left;\n            color: #ccc;\n            font-size: 12px;\n            padding-top:5px;\n            }\n        }\n        >.amount {\n            display: flex;\n            align-items: center;\n        }\n}   \n`;\n\nconst today = dayjs();\nconst Detail = () => {\n    const { computeGroupedList} = useRecord();\n    const { findTagName } = useTags();\n    const [ checkMonth, setCheckMonth ] = useState<string[]>([today.format('YYYY'), today.format('MM')]);\n\n    const getCheckMonth: ChangeEventHandler<HTMLInputElement> = (e) => {\n        const checkMonth = dayjs(e.target.value);\n        setCheckMonth([checkMonth.format('YYYY'), checkMonth.format('MM')]);\n    }\n \n    const groupedList = computeGroupedList(checkMonth.join('-'));\n\n    const computedTotal = () => {\n        let totalExpend = 0;\n        let totalIncome = 0;\n        let balance = 0;\n\n        groupedList.forEach((item: any) => totalExpend += item.totalExpend);\n        groupedList.forEach((item: any) => totalIncome += item.totalIncome)\n        balance = totalIncome - totalExpend;\n        return { totalExpend, totalIncome, balance };\n    }\n    const beautifyDate = (date: string) => {\n            const day = dayjs(date);\n            const now = dayjs();\n            const week = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\n            let result = '';\n            if (day.isSame(now, 'year')) {\n                result = day.format('M月D日')\n            } else (\n                result = day.format('YYYY年M月D日')\n            )\n            if(day.isSame(now, 'day')) {\n                result += ' 今天';\n            } else {\n                result += ' ' + week[day.day()]; \n            }\n            return result;\n        }\n    const beautifyTotal = (expend: number, income: number) => {\n            let string = '';\n            if (income !== 0) {\n                string = string + '收入：' + roundAmount(income);\n            }\n            if (expend !== 0) {\n                string = string +' 支出：' + roundAmount(expend);\n            }\n          \n            return string;\n    }\n    const recordListDom = () => {\n        let content;\n        if (groupedList.length === 0) {\n            content = (<div>暂无数据</div>)\n        } else {\n            content = groupedList.map((group, index) =>\n                <li key={index.toString()}>\n                        <div className=\"title\">\n                            <span>{beautifyDate(group.createdAt)}</span>\n                            <span className=\"totalAmount\">{beautifyTotal(group.totalExpend as number, group.totalIncome as number)}</span>\n                        </div>\n                        <ul>\n                            {\n                                group.items.map((item, index) => <li key={index.toString()} className=\"record\">\n                                    <div className=\"content\">\n                                        <span>{findTagName(item.tagId)}</span>\n                                        <span className=\"remark\">{item.notes}</span>\n                                    </div>\n                                    <div className=\"amount\">{item.type + item.amount}</div>\n                                </li>)\n                            }\n                        </ul>\n                    </li>);\n        }\n        return <ul className=\"recordList\">{content}</ul>;\n    }\n    return (\n        <Layout>\n             <DetailHeader>\n                <div className=\"dateWrapper\">\n                    <div className=\"year\">{ checkMonth[0]}年</div>\n                    <div className=\"monthWrapper\">\n                        <input  type=\"month\" onChange={getCheckMonth} className=\"dateInput\" />          \n                        <div className=\"monthText\">{ checkMonth[1]}月 <span className=\"triangle\"></span></div>\n                    </div>\n                </div>\n                <ul>\n                    <li className=\"key\">\n                        <span>收入</span>\n                        <span>支出</span>\n                    </li>\n                    <li className=\"value\">\n                        <span>{roundAmount(computedTotal().totalIncome)}</span>\n                        <span>{roundAmount(computedTotal().totalExpend)}</span>\n                    </li>\n                </ul>\n            </DetailHeader>\n            <DetailMain>\n                {recordListDom()}\n            </DetailMain>\n        </Layout>\n    )\n}\n\nexport default Detail;","import { useState } from 'react';\nimport styled from 'styled-components';\n\nconst TypesWrapper = styled.div`\n    >ul{\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        background-color: rgb(0, 122, 204);\n        font-size:18px;\n        height:40px;\n        padding: 0 16px;\n        >li {\n            color: #fff;\n            width:20%;\n            position: relative;\n            padding:4px 0;\n            &.selected::after {\n                content: '';\n                position:absolute;\n                bottom:0;\n                left: 0;\n                width: 100%;\n                height: 2px;\n                background-color: #fff;\n            }\n        }\n    }\n    \n`;\n\ntype Props = {\n    value: '-' | '+',\n    onChange: (value: '-' | '+') => void;\n}\n\nconst Types: React.FC<Props> = (props) => {\n    const typesMap = { '-': '支出', '+': '收入' };\n    const [typesList] = useState<('-' | '+')[]>(['-', '+']);\n    const type = props.value;\n    return (\n        <TypesWrapper>\n            <ul>\n                {typesList.map(\n                    item => <li key={item}\n                        className={type === item ? 'selected' : ''}\n                        onClick={() => props.onChange(item)}\n                    >\n                        {typesMap[item]}\n                    </li>\n                )}\n            </ul>\n        </TypesWrapper>\n    )\n};\n\nexport  {Types};","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\nimport {useTags} from 'hooks/useTags';\nimport { Type } from 'hooks/useRecord';\n\nconst TagWrapper = styled.div`\n    display: flex;\n    flex-direction: column;\n    flex-grow: 1;\n    padding: 4px 6px;\n    overflow:auto;\n    scrollbar-width: none; /* Firefox 64 */\n    &::-webkit-scrollbar {\n        display: none;\n    } \n    > .tagList {\n        display: flex;\n        flex-wrap: wrap;\n        padding: 4px;\n        > li {\n            min-height: 40px;\n            min-width: 25%;\n            //border:1px solid;\n            display:flex;\n            justify-content:center;\n            align-items:center;\n            //padding: 6px;\n            .tagName{\n                line-height: 28px;\n                font-size: 16px;\n                min-height: 28px;\n                min-width: 76px;\n                border: 1px solid rgb(211, 211, 211);\n                border-radius: 4px;\n            }\n            >.selected {\n                background-color: #777;\n                border-color:#777;\n                color: #fff;\n            }\n            >.edit {\n                color: #ccc;\n            }\n        }\n    } \n`;\n\ntype Props = {\n    value: number,\n    onChange: (selected: number) => void,\n    type: Type,\n}\nconst Tags: React.FC<Props> = (props) => {\n    const { tags } = useTags();\n    const selectedTagId = props.value;\n    const tagList = tags.filter(tag => tag.type === props.type);\n\n    const onToggleTag = (tagId: number) =>\n        selectedTagId === tagId ? props.onChange(0) : props.onChange(tagId);\n    return (\n        <TagWrapper>\n            <ul className=\"tagList\">\n                {\n                    tagList.map(tag => <li key={tag.id}\n                        onClick={() => onToggleTag(tag.id)}>\n                        <div className={`tagName ${selectedTagId === tag.id ? 'selected' : ''}`}>{tag.name}</div>\n                    </li>)\n                }\n                    <li className=\"editTag\"> \n                    <Link to=\"/editTags\" className=\"edit\">\n                        <div className=\"tagName\">全部</div>\n                    </Link>\n                    </li>\n                </ul>\n        \n        </TagWrapper>\n    )\n};\n\nexport default Tags;","// import { ChangeEventHandler } from 'react';\nimport styled from 'styled-components';\n\n\nconst NotesWrapper = styled.div`\n    border-top: 1px solid rgb(211, 211, 211);\n    border-bottom: 1px solid rgb(211, 211, 211);\n    padding: 0 12px;\n    input {\n        /* flex-grow: 1; */\n        height: 48px;\n        width: 100%;\n        border: none;\n    }\n\n`;\n\nconst Notes = (props: any) => {\n    const note = props.defaultNotes;\n\n\n    // const onChange: ChangeEventHandler<HTMLInputElement> = (e) => {\n    //     props.onChange(e.target.value);\n    // }\n    return (\n        <NotesWrapper>\n            <input  type=\"text\" defaultValue={note} onBlur={(e) => props.onChange(e.target.value)} placeholder=\"备注...\" className=\"notes\" />\n        </NotesWrapper>\n    )\n};\n\nexport default Notes;","import dayjs from 'dayjs';\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n    .outputBox{\n        height: 48px;\n        line-height: 48px;\n        &::after {\n            content: \"\";\n            display: block;\n            clear: both;\n        }\n        >.output {\n                padding: 0 16px;\n                font-size: 24px;\n                float: right;\n        }\n    }\n    .numPad {\n        margin-bottom:0;\n        &::after {\n            content: \"\";\n            display: block;\n            clear: both;\n        }\n        li {\n            border-left: 1px solid rgb(211, 211, 211);\n            border-top: 1px solid rgb(211, 211, 211);\n            width: 25%;\n            height: 52px;\n            line-height: 52px;\n            font-size:24px;\n            float: left;\n            cursor: pointer;\n\n            &.ok {\n                height: 104px;\n                line-height: 104px;\n                background-color: #777;\n                color: #fff;\n                float: right;\n            }\n        }\n        .num-left{\n            border-left:none;\n        }\n        .dateWrapper{\n        //border:1px solid;\n        overflow:hidden;\n        position: relative;\n            .dateText{\n                position: absolute;\n                right: 0px;\n                top: 0px;\n                background: #fff;\n                pointer-events: none;\n                line-height: 52px;\n                font-size:16px;\n                width: 100%;\n                height: 100%;\n            }\n            .date {\n                position: absolute;\n                height:100%;\n                right:28px;\n                top:0px;\n                border:none;\n            }\n        }\n    }\n`;\n\n// type Props = {\n//     value: string;\n//     onChange: (value: number) => void;\n//     onOK?: () => void;\n// }\nconst NumberPad = (props:any) => {\n    const [output, _setOutput] = useState(props.value);\n    const setOutput = (output: string) => {\n        _setOutput(output);\n        props.onChange(output);\n    }\n    useEffect(() => {\n        const dateText = document.querySelector('.dateText') as HTMLDivElement;\n        if (dateText.innerHTML === '今天') {\n            dateText.style.fontSize = '20px';\n        } else {\n            dateText.style.fontSize = '18px';\n        }\n    }, [props.createdAt])\n    const getDate = () => {\n        const today = dayjs().format('YYYY-MM-DD');\n        return props.createdAt === today ? '今天' : props.createdAt.slice(5);\n    }\n    const onClickButtonWrapper = (e: React.MouseEvent) => {\n        const input = (e.target as HTMLButtonElement).textContent as string;\n        console.log(input);\n        const indexOfPoint = output.indexOf('.');\n        if (input === '') return;\n        if ('0123456789.'.indexOf(input) >= 0) {\n            if(output.length >= 11){\n                return;\n            }\n            if (indexOfPoint >= 0 && output !== '0.00') {\n                if(output.substring(indexOfPoint).length >= 3 || input === '.'){\n                    return;\n                }\n            }\n            if (output === '0.00' || output === '0') {\n                if (input === '.') {\n                    setOutput('0.');\n                } else {\n                    setOutput(input);\n                }\n            } else {\n                setOutput(output + input);\n            }\n        } else if (input === 'del') {\n            if (output === '0.00') {\n                return;\n            }\n            if (output.length === 1) {\n                if(output !== '0') {\n                    setOutput('0.00');\n                } else {\n                    return;\n                }  \n            } else {\n                setOutput(output.slice(0,-1));\n            }\n        } else if (input === 'AC') {\n            setOutput('0.00');\n        } else if (input === '确认') {\n            if (props.onOK) props.onOK();\n            _setOutput('0.00');\n            return;\n        }\n    };\n    return (\n        <Wrapper>\n            <div className=\"outputBox\">\n                <span className=\"output\">{ output }</span> \n            </div>\n            <ul className=\"numPad\" onClick={onClickButtonWrapper}>\n                 <li className=\"num-left\">1</li>\n                    <li>2</li>\n                    <li>3</li>\n                    <li className=\"dateWrapper\">\n                        <input  type=\"date\" onChange={(e) =>  props.onChangeDate(e.target.value)} className=\"date\" />          \n                    <div className=\"dateText\">{ getDate() }</div>\n                    </li>\n\n                    <li className=\"num-left\">4</li>\n                    <li >5</li>\n                    <li>6</li>\n                    <li>AC</li>\n\n                    <li className=\"num-left\">7</li>\n                    <li>8</li>\n                    <li>9</li>\n                    <li className=\"ok\">确认</li>\n\n                    <li className=\"num-left\">.</li>    \n                    <li>0</li>\n                    <li>del</li>\n            </ul>\n        </Wrapper>\n    )\n};\n\nexport default NumberPad;","import Layout from \"components/Layout\";\nimport {Types} from 'components/Types';\nimport Tags from 'components/Money/Tags';\nimport Notes from 'components/Money/Notes';\nimport NumberPad from 'components/Money/NumberPad';\nimport { useState } from \"react\";\nimport { Type, useRecord } from \"hooks/useRecord\";\nimport dayjs from \"dayjs\";\n\nconst today = dayjs().format('YYYY-MM-DD');\nconst defaultFormData = {\n    type: '-' as Type,\n    tagId: 0 as number,\n    notes: '',\n    amount: '0.00',\n    createdAt: today as string,\n}\n\nconst Money: React.FC = () => {\n    const [selected, setSelected] = useState(defaultFormData);\n    const { addRecord } = useRecord();\n\n    const onChange = (obj: Partial<typeof defaultFormData>) => {\n        setSelected({ ...selected, ...obj });\n    }\n    const submit = () => {\n        if (selected.tagId === 0) {\n            window.alert('请选择标签');\n            return;\n        }\n        if (selected.amount === '0.00' || selected.amount === '0' || selected.amount === '0.' || selected.amount === '0.0') { \n            window.alert('请输入金额');\n            return\n        }\n        addRecord(selected);\n        //setSelected(defaultFormData);\n    }\n    return (\n        <Layout>\n            <Types value={selected.type} onChange={type => onChange({ type })} />\n            <Tags type={selected.type} value={selected.tagId} onChange={tagId => onChange({ tagId })} />\n            <Notes defaultNotes={selected.notes}  onChange={(notes: string) => onChange({ notes })} />\n            <NumberPad value={selected.amount}\n                createdAt={selected.createdAt}\n                onChange={(amount: string) => onChange({ amount })}\n                onChangeDate={(createdAt: string) => onChange({ createdAt })}\n                onOK={submit} />\n        </Layout>\n    )\n}\n\nexport default Money;","import Layout from 'components/Layout';\nimport {Types} from 'components/Types';\nimport { Type, useRecord } from 'hooks/useRecord';\nimport { useTags } from 'hooks/useTags';\nimport { useState } from 'react';\nimport styled from 'styled-components';\nimport { Modal } from 'antd';\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\nimport 'antd/dist/antd.css';\n\n\nconst EditTagsWrapper = styled.div`\n    overflow:auto;\n    scrollbar-width: none; /* Firefox 64 */\n        &::-webkit-scrollbar {\n            display: none;\n        }\n\n    .tagList{\n        > li {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            border-bottom: 1px solid rgb(211, 211, 211);\n            height: 40px;\n            font-size: 16px;\n            padding: 0 12px 0 16px;\n            }\n        }\n        .edit{\n                display: flex;  \n                align-items: center;\n                color:#444;\n                > div {\n                    padding-left: 8px;\n                }\n            }\n        .remove {\n            font-size: 20px;\n            color: #f00;\n        }\n        .createTag {\n            background: rgb(0, 115, 192);\n            border: none;\n            border-radius: 4px;\n            color: #fff;\n            font-size: 15px;\n            margin: 80px auto;\n            padding: 6px 12px;\n        }\n`;\n\nconst defaultFormData = {\n    type: '-' as Type,\n    tagIds: [] as number[],\n    notes: '',\n    amount: '0.00',\n    createdAt: '',\n}\n\n\nconst EditTags: React.FC = () => {\n    const [selected, setSelected] = useState(defaultFormData);\n    const { tags, addTag, removeTag: _removeTag, updateTag:_updateTag } = useTags();\n    const { removeTagRecords } = useRecord();\n    const tagList = tags.filter(tag => tag.type === selected.type)\n    const { confirm } = Modal;\n\n\n\n    const onChange = (obj: Partial<typeof defaultFormData>) => {\n            setSelected({ ...selected, ...obj });\n    }\n    const createTag = () => {\n        const tagName = window.prompt('标签名');\n        if(tagName) addTag(tagName, selected.type);\n    }\n    const updateTag = (tagId: number) => {\n        const tagName = window.prompt('标签名');\n        if(tagName) _updateTag(tagId, tagName);\n    }\n    function removeTag(tagId: number) {\n        confirm({\n            title: '确认删除标签?',\n            icon: <ExclamationCircleOutlined />,\n            content: '删除标签会同时删除该标签下的所有记账',\n            okText: '确认',\n            okType: 'danger',\n            cancelText: '取消',\n            onOk() {\n                _removeTag(tagId);\n                removeTagRecords(tagId);\n            },\n            onCancel() {\n                return;\n            },\n        });\n    }\n\n    return (\n        <Layout>\n            <Types value={selected.type} onChange={type => onChange({ type })} />\n            <EditTagsWrapper>\n                <ul className=\"tagList\">\n                    {\n                        tagList.map(tag => <li key={tag.id}>\n                            <span>{tag.name}</span>\n                            <div className=\"edit\">\n                                <div>\n                                    <svg className=\"icon\" onClick={() => updateTag(tag.id)}>\n                                        <use xlinkHref=\"#icon-xiugai\"/>\n                                     </svg>\n                                </div>\n                                <div className=\"remove\">\n                                    <svg className=\"icon\" onClick={() => removeTag(tag.id)}>\n                                        <use xlinkHref=\"#icon-shanchu\"/>\n                                    </svg>\n                                </div>\n                            </div>\n                        </li>)\n                        }\n                        <button className=\"createTag\" onClick={createTag} >新增标签</button>\n                    </ul>         \n            </EditTagsWrapper>\n        </Layout>\n    )\n}\n\nexport { EditTags };","import Layout from \"components/Layout\";\nimport { useEffect, useRef, useState } from \"react\";\nimport {Types} from 'components/Types';\nimport { RecordItem, Type, useRecord } from \"hooks/useRecord\";\nimport styled from \"styled-components\";\nimport { Tag, useTags } from \"hooks/useTags\";\nimport { Progress } from 'antd';\nimport React from 'react';\nimport ReactECharts from 'echarts-for-react';\nimport dayjs from \"dayjs\";\nimport {roundNum as roundAmount} from '../lib/roundNum';\n \nconst ContentWrapper = styled.div`\n    overflow:auto;\n    scrollbar-width: none; /* Firefox 64 */\n    &::-webkit-scrollbar {\n        display: none;\n    } \n`;\nconst ChartWrapper = styled.div`\n    overflow: auto;\n    min-height: 300px;\n    scrollbar-width: none; /* Firefox 64 */\n    &::-webkit-scrollbar {\n        display: none;\n    } \n    >.chart{\n       // min-height: 280px;\n        width: 300%;\n    } \n`;\nconst LeaderBoard = styled.ul`\n    li{\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        height: 40px;\n        >.total-mount {\n        margin-top: 12px;\n        width: 90%;\n        text-align: left;\n        font-size:14px;\n        font-weight: 600;\n        border-bottom: 1px solid rgb(211, 211, 211);\n        padding-bottom:2px;\n        }\n        >.bord-list {\n            width: 90%;\n            font-size: 16px;\n            margin-top:20px;\n            display:flex;\n            >.tag {\n        \n            }\n            >.percent {\n                margin-left: 10px;\n                font-size: 12px;\n                color: #aaa;\n                display:flex;\n                align-items: center;\n            }\n            >.total{\n               flex-grow:1;\n               display:flex;\n               justify-content: flex-end;\n            }\n        }\n        >.bar {\n            width:90%;\n            margin-top: -8px;\n            margin-bottom: 10px;\n            padding:0;\n        }\n        .ant-progress-inner {\n            background-color:rgba(0, 122, 204, 0.2);\n        }\n    }\n`;\n\nconst Statistics: React.FC = (props: any) => {\n    const [type, setType] = useState<Type>('-');\n    const { records, computeGroupedList } = useRecord();\n    const { tags, findTagName } = useTags();\n    const chartRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        if (chartRef.current) {\n            chartRef.current.scrollLeft = chartRef.current.scrollWidth;\n        }\n    },[])\n    const computedLeaderList = () => {\n        const tagList = tags.filter(tag => tag.type === type);\n        const recordList = records.filter((item: RecordItem) => item.type === type);\n        let array: any[] = [];\n        tagList.forEach((item: Tag) => {\n            array.push({ tagId: item.id, total: 0});\n        });\n        const today = new Date();\n        recordList.forEach((item: RecordItem) => {\n            const day = new Date(item.createdAt);\n            const MONTH = 86400000 * 31;\n            if(today.valueOf() - day.valueOf() < MONTH) {\n                array.forEach((arrItem: any) => {\n                    if(item.tagId === arrItem.tagId) {\n                        arrItem.total += parseFloat(item.amount);\n                    }\n                })\n            }\n        })\n        array = array.filter(item => item.total !== 0).sort((a, b) => b.total - a.total);\n        return array;\n    }\n    const leaderList = computedLeaderList();\n    const groupedList = computeGroupedList();\n    const totalMount = () => {\n        let mount = 0;\n        leaderList.forEach(item => mount += item.total);\n        return mount;\n    }\n\n    const keyValueList = () => {\n            const today = new Date();\n            const array = [];\n            for(let i = 0; i< 31; i++) {\n                const dateString = dayjs(today).subtract(i, 'day').format('YYYY-MM-DD');\n                const found = groupedList.filter(item => item.createdAt === dateString);\n                if (found.length >= 1) {\n                    array.push({\n                        key: dateString, value: type === '-' ? found[0].totalExpend : found[0].totalIncome\n                    });\n                } else {\n                    array.push({\n                        key: dateString, value: 0\n                    })\n                }\n            }\n            array.sort((a, b) => {\n                if (a.key >= b.key) {\n                    return 1;\n                }else {\n                    return -1;\n                }\n            })\n            return array;\n    }\n  \n    const chartOptions = () => {\n            const keys = keyValueList().map(item => item.key);\n            const values = keyValueList().map(item => item.value); \n            return {\n                grid: {\n                    left: 0,\n                    right: 0,\n                    bottom: 36,\n                },\n                xAxis: {\n                    data: keys,\n                    axisTick: {alignWithLabel: true},\n                    axisLabel: {\n                        formatter: function (value: string) {\n                        return value.substr(5);\n                    }\n            }\n                },\n                yAxis: {\n                    type:'value',\n                    show:false,\n                },\n                series: [{\n                    type: 'line',\n                    data: values,\n                    symbolSize: 10,\n                }],\n                tooltip: {\n                    show:true,\n                    triggerOn: 'click',\n                    position: 'top',\n                    formatter: '{c}',\n                }\n            }\n        }\n\n    const onChange = (type:Type) => {\n        setType(type)\n    }\n    const leaderListDom = () => {\n        let content;\n        content = leaderList.map((item, index) =>\n                        <li key={index.toString()}>\n                            <div className=\"bord-list\">                       \n                                <span className=\"tag\"> {findTagName(item.tagId)} </span>\n                                <span className=\"percent\"> {(Math.round((item.total / totalMount()) * 1000) / 10) + '%'} </span>\n                                <span className=\"total\">{roundAmount(item.total)} </span>\n                            </div>\n                            <Progress percent={item.total / totalMount() * 100}\n                                showInfo={false}\n                                strokeColor={'#007acc'}\n                                strokeWidth={2}\n                                className=\"bar\" />\n                        </li>)\n        return <ul>{content}</ul>;\n    }\n    return (\n        <Layout>\n            <Types value={type} onChange={type => onChange( type )} />\n            <ContentWrapper>\n                <ChartWrapper ref={chartRef}>\n                    <ReactECharts option={chartOptions()} className=\"chart\" />\n                </ChartWrapper>\n                <LeaderBoard>\n                    <li>\n                        <div className=\"total-mount\">\n                            {`总${type === '-' ? \"支出\":\"收入\"}：${roundAmount(totalMount())}`}\n                        </div>\n                    </li>\n                    {leaderListDom()}\n                </LeaderBoard>\n            </ContentWrapper>\n        </Layout>\n    )\n}\n\nexport default Statistics;","const NotFound: React.FC = () => {\n    return (\n        <div>404</div>\n    )\n}\n\nexport default NotFound;","import './App.scss';\nimport {HashRouter as Router, Switch, Route, Redirect} from \"react-router-dom\";\nimport Detail from 'views/Detail';\nimport Money from 'views/Money';\nimport { EditTags } from 'views/EditTags';\nimport Statistics from 'views/Statistics';\nimport NotFound from 'views/NotFound';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Router>\n        <Switch>\n          <Redirect exact from=\"/\" to=\"/detail\" />\n          <Route exact path=\"/detail\">\n            <Detail />\n          </Route>\n          <Route exact path=\"/money\">\n            <Money />\n          </Route>\n          <Route exact path=\"/editTags\">\n            <EditTags />\n          </Route>\n            <Route exact path=\"/statistics\">\n            <Statistics />\n          </Route>\n          <Route path=\"*\">\n            <NotFound />\n          </Route>\n        </Switch>\n    </Router>\n  \n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}